#!/bin/sh -

[ -z "$ZSH_VERSION" ] && exec zsh - "$0" ${1+"$@"}

#/bin/zsh

bundle exec rubocop -a -D
RC=$?
if [ ! $RC -eq 0 ]; then
  echo 'rubocop detected issues, commit aborted!'
  exit 1
fi

scss-lint app/assets/stylesheets/**/*.scss
RC=$?
if [ ! $RC -eq 0 ]; then
  echo 'scss-lint detected issues, commit aborted!'
  exit 1
fi

coffeelint -f .coffeelint.json app/assets/javascripts/**/*.coffee
RC=$?
if [ ! $RC -eq 0 ]; then
  echo 'coffeelint detected issues, commit aborted!'
  exit 1
fi

bundle exec brakeman -z --summary
RC=$?
if [ ! $RC -eq 0 ]; then
  echo 'brakeman detected issues, commit aborted!'
  exit 1
fi

